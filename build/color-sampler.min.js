/*!
 * color-sampler v0.1.3
 * https://github.com/emn178/color-sampler
 *
 * Copyright 2015, emn178@gmail.com
 *
 * @license under the MIT license:
 * http://www.opensource.org/licenses/MIT
 */
!function(t,o,e){"use strict";function i(o,e){this.canvas=t(o),this.options=e||{},this.enabled=!0,this.context=o.getContext("2d"),this.resize(),this.canvas.on("mousemove",this.onMousemove.bind(this)),this.canvas.on("mouseout",this.onMouseout.bind(this)),this.canvas.on("click",this.onClick.bind(this))}function n(){t(d).each(function(){t(this).data(p).resize()})}function s(){h=t('<div class="color-sampler-preview"/>');var o=t("<table/>");h.append(o);for(var e=0;11>e;++e){for(var i=t("<tr>"),n=0;11>n;++n){var s=t("<td></td>").attr("x",n).attr("y",e);v.push(s),i.append(s)}o.append(i)}t("body").append(h)}function a(){b||(b=!0,h.addClass("active"))}function r(){b&&(b=!1,h.removeClass("active"))}function c(){m=m.filter(d),m.each(function(){t(this).data(p).detect()}),0===m.length&&(l=clearInterval(l))}var h,l,p="color-sampler",d=":"+p,u=["padding","border"],f=!1,v=[],b=!1,g=200,m=t();t.expr[":"][p]=function(o){return void 0!==t(o).data(p)},i.prototype.resize=function(){var t=this.canvas,o={left:0,top:0};u.forEach(function(e){o.left+=parseInt(t.css(e+"-left"))||0,o.top+=parseInt(t.css(e+"-top"))||0}),o.right=t.width(),o.bottom=t.height(),this.bounds=o},i.prototype.onMousemove=function(o){if(this.enabled){var e=this.canvas,i=this.bounds,n=o.offsetX-i.left,s=o.offsetY-i.top;if(0>n||0>s||n>=i.right||s>=i.bottom)return void r();h.css({left:o.pageX+5+"px",top:o.pageY+5+"px"});this.setupPreview(n,s);a(),this.color=v[60].css("background-color"),t.isFunction(this.options.onPreview)&&this.options.onPreview.call(e,this.color)}},i.prototype.setupPreview=function(t,o){for(var e=t-5,i=o-5,n=this.context.getImageData(e,i,11,11).data,s=0,a=0;s<n.length;s+=4,++a){var r=parseInt(a/11)+i,c=a%11+e;if(0>c||0>r)v[a].css("background-color","white");else{var h="rgba("+Array.prototype.slice.call(n,s,s+4).join(",")+")";v[a].css("background-color",h)}}},i.prototype.onMouseout=function(){r()},i.prototype.onClick=function(o){this.color&&this.enabled&&t.isFunction(this.options.onSelect)&&this.options.onSelect.call(this.canvas,this.color)},i.prototype.detect=function(){(this.canvas.width()!=this.bounds.right||this.canvas.height()!=this.bounds.bottom)&&this.resize()},i.prototype.enable=function(t){void 0===t&&(t=!0),this.enabled=t},i.prototype.disable=function(t){void 0===t&&(t=!0),this.enabled=!t,r()};var y=["enable","disable","resize"];t.fn.colorSampler=function(a,r){var h,d="string"==typeof a;return this.filter("canvas").each(function(){d?-1!=t.inArray(a,y)&&(h=t(this).data(p),h&&h[a].apply(h,r)):(r=a,h=new i(this,r),t(this).data(p,h),f||(f=!0,s(),t(e).ready(function(){t(o).bind("resize",n)})),m=m.add(this),g&&!l&&(l=setInterval(c,g)))}),this},t.colorSamper={},t.colorSamper.setInterval=function(o){o==g||!t.isNumeric(o)||0>o||(g=o,l=clearInterval(l),g>0&&(l=setInterval(c,g)))}}(jQuery,window,document);